---
import { getSiteConfig } from '../lib/sanity-utils';
import logo from '../assets/logo.png';

interface Props {
  location?: string;
}

const { location } = Astro.props;

console.log('Header location prop:', location);

let siteTitle = 'Cafe Review';
let logoUrl = logo.src;

try {
  const siteConfig = await getSiteConfig();
  if (siteConfig) {
    siteTitle = siteConfig.title || siteTitle;
  }
} catch (error) {
  console.error('Failed to load site config for header:', error);
}
---

<header>
	<nav>
		<div class="brand">
			<a href="/" class="brand-container">
				{logoUrl && (
					<img src={logoUrl} alt={siteTitle} class="logo" />
				)}
				<span class="site-title">
					{siteTitle}
					{location && <span class="location-bracket"> [{location}]</span>}
				</span>
			</a>
		</div>
	</nav>
</header>
<style>
	header {
		position: absolute;
		top: 2rem;
		left: 14rem;
		z-index: 1000;
		background: transparent;
	}

	nav {
		display: flex;
		align-items: center;
		justify-content: flex-start;
	}

	.brand {
		display: flex;
		align-items: center;
	}

	.brand-container {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		text-decoration: none;
		font-weight: 600;
		transition: all 0.3s ease;
		background: white;
		padding: 0.4rem 0.8rem;
		border-radius: 8px;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	}

	.brand-container:hover {
		opacity: 0.9;
	}


	.logo {
		height: 32px;
		width: auto;
		object-fit: contain;
	}

	.location-bracket {
		color: #ff6b35;
		font-weight: 600;
	}

	.site-title {
		font-size: 1.2rem;
		font-weight: 700;
		color: #333;
	}

	/* Responsive design */
	@media (max-width: 768px) {
		header {
			top: 1rem;
			left: 1rem;
		}

		.logo {
			height: 32px;
		}

		.site-title {
			font-size: 1.2rem;
		}
	}
</style>
